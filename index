<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Interactiva Enfermería USACH</title>
  <link rel="stylesheet" href="estilos.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #F2CBE0;
      color: #3B395D;
      text-align: center;
      padding: 20px;
    }

    h1 {
      margin-bottom: 30px;
      color: #3B395D;
    }

    #malla {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: center;
      gap: 40px;
    }

    .semestre {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .curso {
      background-color: #9085BC;
      color: white;
      padding: 10px;
      width: 180px;
      border-radius: 10px;
      cursor: pointer;
      border: 2px solid #3B395D;
      transition: background-color 0.3s ease;
      font-family: Arial, sans-serif;
      text-transform: none;
    }

    .curso.bloqueado {
      background-color: #8F477B;
      cursor: not-allowed;
      opacity: 0.6;
    }

    .curso.aprobado {
      background-color: #CB6D9A;
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva Enfermería USACH</h1>
  <div id="malla"></div>
  <script>
    const semestres = {
      1: ["Inglés I", "Química General", "Biología", "Anatomía", "Introducción a la Enfermería I", "Taller de Desarrollo Integral", "Sociología"],
      2: [
        ["Inglés II", ["Inglés I"]],
        ["Bioquímica", ["Biología", "Química General"]],
        ["Agentes Biológicos en Salud - Enfermedad", ["Biología"]],
        ["Fisiología", ["Anatomía", "Biología"]],
        ["Introducción a la Enfermería II", ["Introducción a la Enfermería I"]],
        ["Histología", ["Anatomía", "Biología"]],
        ["Taller de Relaciones Humanas", ["Taller de Desarrollo Integral"]]
      ],
      3: [
        ["Inglés III", ["Inglés II"]],
        ["Farmacología", ["Fisiología", "Bioquímica"]],
        ["Fisiopatología", ["Fisiología", "Bioquímica"]],
        ["Procesos de Atención y Cuidados Básicos de Enfermería I", ["Introducción a la Enfermería II", "Agentes Biológicos en Salud - Enfermedad"]],
        ["Metodología de la Investigación I", ["Introducción a la Enfermería II"]],
        ["Educación para la Salud", ["Introducción a la Enfermería II"]],
        "Electivo I"
      ],
      4: [
        ["Inglés IV", ["Inglés III"]],
        ["Introducción a la Enfermería en Salud Mental", ["Taller de Desarrollo Integral", "Taller de Relaciones Humanas"]],
        ["Salud Pública", ["Introducción a la Enfermería II"]],
        ["Proceso de Atención y Cuidados Básicos de Enfermería II", ["Farmacología", "Educación para la Salud", "Procesos de Atención y Cuidados Básicos de Enfermería I", "Fisiopatología"]],
        ["Introducción a la Enfermería Comunitaria y Salud Familiar", ["Sociología", "Educación para la Salud"]],
        ["Administración en Enfermería", ["Procesos de Atención y Cuidados Básicos de Enfermería I"]],
        ["Metodología de la Investigación II", ["Metodología de la Investigación I"]],
        "Electivo II"
      ]
    };

    const malla = document.getElementById("malla");
    const estados = {};

    function crearCaja(nombre, requisitos = []) {
      const div = document.createElement("div");
      div.className = "curso bloqueado";
      div.textContent = nombre;
      div.dataset.nombre = nombre;
      div.dataset.requisitos = JSON.stringify(requisitos);

      if (requisitos.length === 0) div.classList.remove("bloqueado");

      div.addEventListener("click", () => {
        if (div.classList.contains("bloqueado")) return;

        if (div.classList.contains("aprobado")) {
          div.classList.remove("aprobado");
          estados[nombre] = false;
        } else {
          div.classList.add("aprobado");
          estados[nombre] = true;
        }

        actualizarEstado();
      });

      return div;
    }

    function actualizarEstado() {
      document.querySelectorAll(".curso").forEach(curso => {
        const nombre = curso.dataset.nombre;
        const requisitos = JSON.parse(curso.dataset.requisitos);
        const desbloqueado = requisitos.every(req => estados[req]);
        if (desbloqueado) {
          curso.classList.remove("bloqueado");
        } else if (!curso.classList.contains("aprobado")) {
          curso.classList.add("bloqueado");
        }
      });
    }

    function cargarMalla() {
      Object.entries(semestres).forEach(([semestre, ramos]) => {
        const contenedor = document.createElement("div");
        const titulo = document.createElement("h2");
        titulo.textContent = `Semestre ${semestre}`;
        const nivel = document.createElement("div");
        nivel.className = "semestre";

        ramos.forEach(ramo => {
          if (typeof ramo === "string") {
            const caja = crearCaja(ramo);
            estados[ramo] = false;
            nivel.appendChild(caja);
          } else {
            const [nombre, requisitos] = ramo;
            const caja = crearCaja(nombre, requisitos);
            estados[nombre] = false;
            nivel.appendChild(caja);
          }
        });

        contenedor.appendChild(titulo);
        contenedor.appendChild(nivel);
        malla.appendChild(contenedor);
      });
    }

    cargarMalla();
  </script>
</body>
</html>
